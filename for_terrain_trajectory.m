%构建地形
p = imread('demo.jpg');
g = rgb2gray(p); % 转为灰阶图
gg = double(g); % 转为数值矩阵
gg = 1-gg/255; % 将彩色值转为 0-1 的渐变值
[x,y] = size(gg); % 取原图大小
[X,Y] = meshgrid(1:y,1:x); % 以原图大小构建网格
mesh(X,Y,gg); % 网格上画出图像
colormap gray % 设为灰阶图像

%构建对象
h1 = animatedline('MaximumNumPoints',100,'Color','blue');
h2 = animatedline('MaximumNumPoints',100,'Color','red');

view(166,80);              %指定图形视点 
axis off                   %取消坐标轴  

%随机
r = unifrnd (1, 2, 1, 250); 

%轨迹矩阵
x2 = 125.5:0.5:250; x2 = x2 + 5*r;
y2 = 1:0.5:125.5; y2 = y2 + 8*r;
z2 = 0.3+[0.180392156862745	0.168627450980392	0.145098039215686	0.117647058823529	0.0980392156862745	0.0901960784313726	0.0862745098039216	0.0862745098039216	0.0784313725490197	0.101960784313725	0.129411764705882	0.152941176470588	0.168627450980392	0.188235294117647	0.215686274509804	0.239215686274510	0.266666666666667	0.278431372549020	0.290196078431373	0.294117647058824	0.294117647058824	0.301960784313726	0.321568627450980	0.341176470588235	0.321568627450980	0.345098039215686	0.376470588235294	0.388235294117647	0.388235294117647	0.388235294117647	0.396078431372549	0.403921568627451	0.415686274509804	0.411764705882353	0.411764705882353	0.415686274509804	0.435294117647059	0.462745098039216	0.490196078431373	0.509803921568627	0.533333333333333	0.521568627450980	0.498039215686275	0.482352941176471	0.482352941176471	0.490196078431373	0.505882352941176	0.517647058823529	0.521568627450980	0.529411764705882	0.525490196078431	0.494117647058824	0.458823529411765	0.443137254901961	0.458823529411765	0.478431372549020	0.466666666666667	0.454901960784314	0.439215686274510	0.439215686274510	0.454901960784314	0.490196078431373	0.529411764705882	0.552941176470588	0.521568627450980	0.505882352941176	0.486274509803922	0.462745098039216	0.454901960784314	0.454901960784314	0.462745098039216	0.470588235294118	0.450980392156863	0.443137254901961	0.431372549019608	0.423529411764706	0.431372549019608	0.454901960784314	0.478431372549020	0.494117647058824	0.513725490196078	0.545098039215686	0.588235294117647	0.623529411764706	0.650980392156863	0.682352941176471	0.713725490196078	0.737254901960784	0.862745098039216	0.913725490196078	0.925490196078431	0.984313725490196	0.980392156862745	0.937254901960784	0.976470588235294	0.980392156862745	0.952941176470588	0.952941176470588	0.941176470588235	0.905882352941177	0.847058823529412	0.788235294117647	0.749019607843137	0.725490196078431	0.666666666666667	0.639215686274510	0.600000000000000	0.568627450980392	0.541176470588235	0.509803921568627	0.470588235294118	0.447058823529412	0.458823529411765	0.443137254901961	0.427450980392157	0.419607843137255	0.419607843137255	0.411764705882353	0.396078431372549	0.380392156862745	0.329411764705882	0.325490196078431	0.317647058823529	0.321568627450980	0.329411764705882	0.345098039215686	0.360784313725490	0.368627450980392	0.411764705882353	0.400000000000000	0.380392156862745	0.352941176470588	0.325490196078431	0.298039215686275	0.278431372549020	0.266666666666667	0.239215686274510	0.250980392156863	0.270588235294118	0.282352941176471	0.286274509803922	0.278431372549020	0.266666666666667	0.254901960784314	0.301960784313726	0.309803921568627	0.317647058823529	0.321568627450980	0.309803921568627	0.290196078431373	0.266666666666667	0.254901960784314	0.235294117647059	0.231372549019608	0.223529411764706	0.227450980392157	0.247058823529412	0.270588235294118	0.298039215686275	0.313725490196078	0.349019607843137	0.372549019607843	0.400000000000000	0.411764705882353	0.419607843137255	0.423529411764706	0.439215686274510	0.454901960784314	0.466666666666667	0.470588235294118	0.490196078431373	0.529411764705882	0.580392156862745	0.615686274509804	0.627450980392157	0.627450980392157	0.600000000000000	0.584313725490196	0.576470588235294	0.564705882352941	0.552941176470588	0.545098039215686	0.572549019607843	0.607843137254902	0.682352941176471	0.713725490196078	0.733333333333333	0.713725490196078	0.674509803921569	0.643137254901961	0.607843137254902	0.580392156862745	0.592156862745098	0.588235294117647	0.588235294117647	0.607843137254902	0.647058823529412	0.701960784313725	0.752941176470588	0.788235294117647	0.858823529411765	0.898039215686275	0.901960784313726	0.839215686274510	0.776470588235294	0.741176470588235	0.709803921568627	0.678431372549020	0.603921568627451	0.576470588235294	0.537254901960784	0.509803921568627	0.494117647058824	0.482352941176471	0.466666666666667	0.450980392156863	0.447058823529412	0.435294117647059	0.415686274509804	0.396078431372549	0.384313725490196	0.380392156862745	0.380392156862745	0.384313725490196	0.337254901960784	0.333333333333333	0.329411764705882	0.325490196078431	0.317647058823529	0.313725490196078	0.309803921568627	0.305882352941177	0.270588235294118	0.243137254901961	0.243137254901961	0.266666666666667	0.274509803921569	0.270588235294118	0.286274509803922	0.321568627450980	0.333333333333333	0.321568627450980	0.305882352941177	0.298039215686275	0.301960784313726	0.321568627450980	0.345098039215686	0.356862745098039	0.372549019607843];

x1 = 120.5:0.5:245; x1 = x1 + 5*r;
y1 = 1:0.5:125.5; y1 = y1 + 8*r;
z1 = 0.3+[0.266666666666667	0.262745098039216	0.258823529411765	0.243137254901961	0.223529411764706	0.196078431372549	0.172549019607843	0.160784313725490	0.156862745098039	0.168627450980392	0.188235294117647	0.215686274509804	0.247058823529412	0.274509803921569	0.294117647058824	0.305882352941177	0.325490196078431	0.329411764705882	0.337254901960784	0.345098039215686	0.356862745098039	0.364705882352941	0.372549019607843	0.376470588235294	0.372549019607843	0.376470588235294	0.384313725490196	0.396078431372549	0.407843137254902	0.419607843137255	0.427450980392157	0.431372549019608	0.443137254901961	0.435294117647059	0.411764705882353	0.380392156862745	0.352941176470588	0.345098039215686	0.360784313725490	0.380392156862745	0.384313725490196	0.384313725490196	0.376470588235294	0.364705882352941	0.345098039215686	0.321568627450980	0.301960784313726	0.290196078431373	0.258823529411765	0.247058823529412	0.239215686274510	0.243137254901961	0.250980392156863	0.250980392156863	0.239215686274510	0.227450980392157	0.184313725490196	0.180392156862745	0.180392156862745	0.188235294117647	0.203921568627451	0.227450980392157	0.247058823529412	0.262745098039216	0.309803921568627	0.301960784313726	0.286274509803922	0.262745098039216	0.239215686274510	0.215686274509804	0.200000000000000	0.188235294117647	0.156862745098039	0.164705882352941	0.176470588235294	0.184313725490196	0.188235294117647	0.184313725490196	0.172549019607843	0.168627450980392	0.121568627450980	0.109803921568628	0.0941176470588235	0.0823529411764706	0.0862745098039216	0.105882352941176	0.125490196078431	0.141176470588235	0.164705882352941	0.168627450980392	0.180392156862745	0.192156862745098	0.203921568627451	0.215686274509804	0.223529411764706	0.227450980392157	0.247058823529412	0.247058823529412	0.243137254901961	0.223529411764706	0.207843137254902	0.200000000000000	0.211764705882353	0.227450980392157	0.258823529411765	0.262745098039216	0.262745098039216	0.250980392156863	0.243137254901961	0.247058823529412	0.266666666666667	0.286274509803922	0.294117647058824	0.290196078431373	0.274509803921569	0.254901960784314	0.239215686274510	0.219607843137255	0.203921568627451	0.200000000000000	0.168627450980392	0.160784313725490	0.145098039215686	0.137254901960784	0.141176470588235	0.160784313725490	0.184313725490196	0.196078431372549	0.211764705882353	0.215686274509804	0.227450980392157	0.243137254901961	0.258823529411765	0.274509803921569	0.286274509803922	0.290196078431373	0.309803921568627	0.313725490196078	0.317647058823529	0.325490196078431	0.333333333333333	0.345098039215686	0.349019607843137	0.352941176470588	0.333333333333333	0.321568627450980	0.305882352941177	0.286274509803922	0.278431372549020	0.274509803921569	0.278431372549020	0.282352941176471	0.262745098039216	0.262745098039216	0.258823529411765	0.250980392156863	0.247058823529412	0.262745098039216	0.298039215686275	0.325490196078431	0.352941176470588	0.376470588235294	0.411764705882353	0.443137254901961	0.466666666666667	0.498039215686275	0.533333333333333	0.556862745098039	0.576470588235294	0.560784313725490	0.529411764705882	0.494117647058824	0.462745098039216	0.443137254901961	0.435294117647059	0.431372549019608	0.384313725490196	0.388235294117647	0.400000000000000	0.411764705882353	0.423529411764706	0.439215686274510	0.447058823529412	0.450980392156863	0.447058823529412	0.474509803921569	0.509803921568627	0.529411764705882	0.533333333333333	0.537254901960784	0.545098039215686	0.552941176470588	0.552941176470588	0.529411764705882	0.490196078431373	0.443137254901961	0.400000000000000	0.372549019607843	0.352941176470588	0.345098039215686	0.317647058823529	0.321568627450980	0.325490196078431	0.321568627450980	0.305882352941177	0.290196078431373	0.270588235294118	0.254901960784314	0.250980392156863	0.247058823529412	0.235294117647059	0.223529411764706	0.207843137254902	0.196078431372549	0.184313725490196	0.180392156862745	0.180392156862745	0.180392156862745	0.176470588235294	0.164705882352941	0.145098039215686	0.121568627450980	0.101960784313725	0.0862745098039216	0.0705882352941176	0.0666666666666667	0.0627450980392157	0.0588235294117647	0.0470588235294118	0.0392156862745098	0.0313725490196078	0.0274509803921569	0.0352941176470588	0.0392156862745098	0.0470588235294118	0.0588235294117647	0.0705882352941176	0.0823529411764706	0.0901960784313726	0.0941176470588235	0.0980392156862745	0.0980392156862745	0.0980392156862745	0.105882352941176	0.121568627450980	0.141176470588235	0.164705882352941	0.176470588235294	0.200000000000000];


%展示
for k = 1:length(x1)
    addpoints(h1,x1(k),y1(k),z1(k));
    addpoints(h2,x2(k),y2(k),z2(k));
    drawnow
end
